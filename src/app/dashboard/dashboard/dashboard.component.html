
<div class="dashboard-wrapper">
  <app-sidebar></app-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <header class="dashboard-header">
      <h1>لوحة التحكم</h1>
      <div class="notification-area">
        <div class="notification-icon" (click)="toggleNotifications()">
          <i class="fas fa-bell"></i>
          <span *ngIf="unreadNotificationsCount > 0" class="badge">{{ unreadNotificationsCount }}</span>
        </div>
        <div *ngIf="showNotifications" class="notifications-dropdown">
          <div class="notifications-header">الإشعارات</div>
          <div *ngIf="!notifications?.length" class="no-notifications">لا توجد إشعارات جديدة</div>
          <div *ngFor="let notification of notifications" class="notification-item" [ngClass]="{'unread': !notification.read}">
            <p>{{ notification.message }}</p>
            <small>{{ notification.createdAt | date:'short' }}</small>
          </div>
        </div>
      </div>
    </header>
    <div class="counters-container">
      <div class="counters">
        <span class="counter">
          <i class="fas fa-users me-2"></i>
          عدد الأعضاء: {{ membersCount }}
        </span>
        <span class="counter">
          <i class="fas fa-file-alt me-2"></i>
          عدد الطلبات: {{ joinRequestsCount }}
        </span>
      </div>
    </div>
    <section class="content-area">
      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ error }}
        <button type="button" class="btn-close" (click)="error = null"></button>
      </div>


      <!-- Dashboard Cards -->
      <div class="row g-4">
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-members" (click)="navigateTo('/all-members')">
            <div class="card-body text-center">
              <i class="fas fa-users fa-3x mb-3"></i>
              <h5 class="card-title">عرض جميع الأعضاء</h5>
              <p class="card-text">عرض قائمة الأعضاء المعتمدين</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-requests" (click)="navigateTo('/all-join-request')">
            <div class="card-body text-center">
              <i class="fas fa-file-alt fa-3x mb-3"></i>
              <h5 class="card-title">عرض جميع الطلبات</h5>
              <p class="card-text">عرض طلبات الانضمام</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-book" (click)="navigateTo('/upload-pdf')">
            <div class="card-body text-center">
              <i class="fas fa-book fa-3x mb-3"></i>
              <h5 class="card-title">إضافة كتاب</h5>
              <p class="card-text">إضافة كتاب جديد إلى النظام</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-opinion" (click)="navigateTo('/add-testimonials')">
            <div class="card-body text-center">
              <i class="fas fa-comment-dots fa-3x mb-3"></i>
              <h5 class="card-title">إضافة رأي</h5>
              <p class="card-text">إضافة رأي عميل</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-leaderboard" (click)="navigateTo('/add-leaderboards')">
            <div class="card-body text-center">
              <i class="fas fa-trophy fa-3x mb-3"></i>
              <h5 class="card-title">إضافة متصدر</h5>
              <p class="card-text">إضافة متصدر جديد</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-gallery" (click)="navigateTo('/add-gallery')">
            <div class="card-body text-center">
              <i class="fas fa-image fa-3x mb-3"></i>
              <h5 class="card-title">إضافة صورة</h5>
              <p class="card-text">إضافة صورة في معرض الصور</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-low-lecture-members" (click)="navigateTo('/low-lecture-members')">
            <div class="card-body text-center">
              <i class="fas fa-user-times fa-3x mb-3"></i>
              <h5 class="card-title">الأعضاء المقصرون</h5>
              <p class="card-text">عرض قائمة الأعضاء المقصرين</p>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div class="card shadow-sm dashboard-card card-request-pdf" (click)="navigateTo('/lectures-request')">
            <div class="card-body text-center">
              <i class="fas fa-file-alt fa-3x mb-3"></i>
              <h5 class="card-title">طلبات pdf المحاضرات</h5>
              <p class="card-text">عرض قائمة طلبات رفع المحاضرات</p>
            </div>
          </div>
        </div>
      </div>



      <!-- Pie Chart Section -->
      <section class="chart-section" style="margin-top: 12px;">
        <h2>إحصائيات الطلبات</h2>
        <div class="pie-chart-container">
          <canvas baseChart
            [data]="pieChartData"
            [options]="pieChartOptions"
            [type]="pieChartType"
            [labels]="pieChartLabels">
          </canvas>
        </div>
      </section>

      <!-- Bar Chart Section: Top 5 Volunteers -->
      <section class="chart-section">
        <h2>أعلى 5 متطوعين بساعات التطوع</h2>
        <div class="chart-container">
          <canvas baseChart
            [data]="barChartData"
            [options]="barChartOptions"
            [type]="barChartType"
            [labels]="barChartLabels">
          </canvas>
        </div>
      </section>

      <router-outlet></router-outlet>
    </section>
  </main>
</div>
