<div style="margin-top:3rem;">
  <app-new-section></app-new-section>
</div>

<div class="gallery-container" [attr.dir]="translationService.isRtl() ? 'rtl' : 'ltr'" id="gallerysection">
  <!-- Header -->
  <header class="gallery-header">
    <h1 class="gallery-title">{{ 'gallery.title' | translate }}</h1>
    <p class="gallery-subtitle">{{ 'gallery.subtitle' | translate }}</p>
  </header>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

  <!-- Hero Slider Section -->
  <section class="hero-section">
    <h2 class="section-title">{{ 'gallery.featuredActivities' | translate }}</h2>
    <swiper-container class="hero-swiper"
                     slides-per-view="3"
                     space-between="20"
                     loop="true"
                     autoplay='{"delay": 2500, "disableOnInteraction": false}'
                     speed="800"
                     navigation="true"
                     pagination='{"clickable": true}'
                     touch-events-target="container"
                     touch-ratio="1"
                     touch-angle="45"
                     simulate-touch="true"
                     grab-cursor="true"
                     breakpoints='{
                       "320": { "slidesPerView": 1, "spaceBetween": 10 },
                       "768": { "slidesPerView": 2, "spaceBetween": 15 },
                       "992": { "slidesPerView": 3, "spaceBetween": 20 }
                     }'>
      <swiper-slide *ngFor="let image of featuredImages; let i = index">
        <div class="hero-slide">
          <img [src]="getImageUrl(image.imagePath)" [alt]="image.title" class="hero-image" loading="lazy" (click)="openModal(image, 'featured', i)">
          <div class="hero-caption">
            <h3>{{ image.title }}</h3>
            <p>{{ image.description }}</p>
          </div>
        </div>
      </swiper-slide>
    </swiper-container>
  </section>

  <!-- Latest Images Section -->
  <section class="gallery-section">
    <h2 class="section-title">{{ 'gallery.latestEvents' | translate }}</h2>
    <p class="section-description">{{ 'gallery.latestEventsDescription' | translate }}</p>
    <div class="gallery-grid">
      <div *ngFor="let image of latestImages; let i = index" class="gallery-card">
        <div class="image-wrapper">
          <img [src]="getImageUrl(image.imagePath)" [alt]="image.title" class="gallery-image" loading="lazy" (click)="openModal(image, 'latest', i)">
          <div class="image-overlay">
            <h3 class="image-title">{{ image.title }}</h3>
            <p class="image-description">{{ image.description }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Popular Images Section -->
  <section class="gallery-section popular-section">
    <h2 class="section-title">{{ 'gallery.impactfulActivities' | translate }}</h2>
    <p class="section-description">{{ 'gallery.impactfulActivitiesDescription' | translate }}</p>
    <div class="row">
      <div class="col-md-6">
        <swiper-container class="vertical-swiper"
                         slides-per-view="1"
                         loop="true"
                         autoplay='{"delay": 4000, "disableOnInteraction": false}'
                         direction="vertical"
                         navigation="true"
                         touch-events-target="container"
                         touch-ratio="1"
                         touch-angle="45"
                         simulate-touch="true"
                         grab-cursor="true">
          <swiper-slide *ngFor="let image of popularImages; let i = index">
            <img [src]="getImageUrl(image.imagePath)" [alt]="image.title" class="popular-image" loading="lazy" (click)="openModal(image, 'popular', i)">
            <div class="popular-caption">
              <h3>{{ image.title }}</h3>
              <p>{{ image.description }}</p>
            </div>
          </swiper-slide>
        </swiper-container>
      </div>
      <div class="col-md-6">
        <div class="popular-text">
          <h3>{{ 'gallery.humanitarianMessage' | translate }}</h3>
          <p>{{ 'gallery.humanitarianMessageDescription1' | translate }}</p>
          <p>{{ 'gallery.humanitarianMessageDescription2' | translate }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- All Images Section -->
  <section class="gallery-section">
    <h2 class="section-title">{{ 'gallery.allImages' | translate }}</h2>
    <p class="section-description">{{ 'gallery.allImagesDescription' | translate }}</p>
    <div class="gallery-grid">
      <div *ngFor="let image of allImages; let i = index" class="gallery-card">
        <div class="image-wrapper">
          <img [src]="getImageUrl(image.imagePath)" [alt]="image.title" class="gallery-image" loading="lazy" (click)="openModal(image, 'all', i)">
          <div class="image-overlay">
            <h3 class="image-title">{{ image.title }}</h3>
            <p class="image-description">{{ image.description }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div class="modal" *ngIf="showModal && currentImage" (click)="closeModal($event)">
    <div class="modal-content">
      <span class="modal-close" (click)="closeModal()">&times;</span>
      <img [src]="getImageUrl(currentImage.imagePath)" [alt]="currentImage.title || ''" class="modal-image">
      <div class="modal-caption">
        <h3>{{ currentImage.title || '' }}</h3>
        <p>{{ currentImage.description || '' }}</p>
      </div>
      <button class="modal-next" (click)="prevImage()" [disabled]="!hasPrevImage()">❮</button>
      <button class="modal-prev" (click)="nextImage()" [disabled]="!hasNextImage()">❯</button>
    </div>
  </div>
</div>
