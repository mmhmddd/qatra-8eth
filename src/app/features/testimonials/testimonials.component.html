<section class="hero-section">
  <div class="container hero-container">
    <div class="text-container" [attr.dir]="translationService.isRtl() ? 'rtl' : 'ltr'">
      <h1 class="hero-title">{{ 'testimonials.heroTitle' | translate }}</h1>
      <p class="hero-description">{{ 'testimonials.heroDescription' | translate }}</p>
      <button class="hero-button btn" (click)="scrollToSwiper()">{{ 'testimonials.viewAllButton' | translate }}</button>
    </div>
  </div>
</section>

<section class="values-section">
  <div class="container values-container">
    <div class="row text-center" [attr.dir]="translationService.isRtl() ? 'rtl' : 'ltr'">
      <div class="col-4 value-item">
        <i class="fas fa-lightbulb fa-3x value-icon"></i>
        <h3 class="value-title">{{ 'testimonials.valueExperience' | translate }}</h3>
      </div>
      <div class="col-4 value-item">
        <i class="fas fa-book fa-3x value-icon"></i>
        <h3 class="value-title">{{ 'testimonials.valueLearning' | translate }}</h3>
      </div>
      <div class="col-4 value-item">
        <i class="fas fa-heart fa-3x value-icon"></i>
        <h3 class="value-title">{{ 'testimonials.valueHumanity' | translate }}</h3>
      </div>
    </div>
  </div>
</section>

<div class="swiper-container" id="swiper_container">
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
  <div class="swiper-wrapper" *ngIf="testimonialChunks.length; else noTestimonials">
    <div class="swiper-slide" *ngFor="let slideTestimonials of testimonialChunks">
      <div class="cards-wrapper">
        <div class="testimonial-card card" *ngFor="let testimonial of slideTestimonials">
          <div class="card-body">
            <div class="profile-container d-flex">
              <img [src]="getImageUrl(testimonial.image)" alt="{{ 'testimonials.profileAlt' | translate }}" class="profile-image" (error)="handleImageError($event)">
              <div class="profile-text">
                <h3 class="name">{{ testimonial.name }}</h3>
                <span class="role" *ngIf="testimonial.major">{{ testimonial.major }}</span>
              </div>
            </div>
            <div class="rating">
              <span *ngFor="let star of [1,2,3,4,5]" [ngClass]="getStarClass(testimonial.rating, star)">â˜…</span>
            </div>
            <p class="comment" [attr.lang]="translationService.isRtl() ? 'ar' : 'en'" [attr.dir]="translationService.isRtl() ? 'rtl' : 'ltr'">{{ testimonial.reviewText }}</p>
          </div>
        </div>
        <!-- Add placeholder card if only one testimonial in chunk -->
        <div class="testimonial-card card placeholder" *ngIf="slideTestimonials.length === 1">
          <div class="card-body">
            <div class="profile-container d-flex align-items-center">
              <div class="profile-image placeholder-image"></div>
              <h3 class="name placeholder-text">{{ 'testimonials.placeholderText' | translate }}</h3>
            </div>
            <div class="rating">
              <span class="star placeholder-text">{{ 'testimonials.placeholderText' | translate }}</span>
            </div>
            <p class="comment placeholder-text">{{ 'testimonials.placeholderText' | translate }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="swiper-pagination"></div>
</div>

<ng-template #noTestimonials>
  <div class="alert alert-info">
    {{ 'testimonials.noTestimonials' | translate }}
  </div>
</ng-template>
